# Woodlin 数据库配置
# Data ID: woodlin-datasource.yml
# Group: DEFAULT_GROUP
# 描述: 数据库连接和连接池配置

spring:
  # 数据库配置
  datasource:
    dynamic:
      primary: master
      strict: false
      datasource:
        master:
          url: ${DATABASE_URL:jdbc:mysql://localhost:3306/woodlin?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8}
          username: ${DATABASE_USERNAME:root}
          password: ${DATABASE_PASSWORD:Passw0rd}
          driver-class-name: ${DATABASE_DRIVER:com.mysql.cj.jdbc.Driver}
          type: com.alibaba.druid.pool.DruidDataSource
          druid:
            initial-size: ${DATABASE_DRUID_INITIAL_SIZE:5}
            min-idle: ${DATABASE_DRUID_MIN_IDLE:5}
            max-active: ${DATABASE_DRUID_MAX_ACTIVE:20}
            max-wait: ${DATABASE_DRUID_MAX_WAIT:60000}
            time-between-eviction-runs-millis: 60000
            min-evictable-idle-time-millis: 300000
            validation-query: ${DATABASE_DRUID_VALIDATION_QUERY:SELECT 1}
            test-while-idle: true
            test-on-borrow: false
            test-on-return: false
            pool-prepared-statements: true
            max-pool-prepared-statement-per-connection-size: 20
            filters: stat,wall,slf4j
            connection-properties: druid.stat.mergeSql\=true;druid.stat.slowSqlMillis\=5000
